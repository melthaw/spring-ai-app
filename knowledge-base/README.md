# Knowledge Base Module

## æ¦‚è¿°

çŸ¥è¯†åº“æ¨¡å—æ˜¯ä¸€ä¸ªä¼ä¸šçº§çš„çŸ¥è¯†ç®¡ç†ç³»ç»Ÿï¼Œæ”¯æŒæ ‘å½¢ç»“æ„çš„çŸ¥è¯†åº“ç»„ç»‡ï¼Œæ•´åˆäº†æ–‡ä»¶ä¸Šä¼ å’ŒRAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰åŠŸèƒ½ã€‚

## åŠŸèƒ½ç‰¹æ€§

### ğŸ—ï¸ æ ¸å¿ƒæ¶æ„
- **ä¸‰å±‚æ ‘å½¢ç»“æ„**: çŸ¥è¯†åº“ â†’ åˆ†ç±» â†’ æ–‡æ¡£
- **æ¨¡å—åŒ–è®¾è®¡**: æ•´åˆuploadå’Œragæ¨¡å—çš„èƒ½åŠ›
- **ä¼ä¸šçº§åŠŸèƒ½**: æ”¯æŒå¤šç”¨æˆ·ã€æƒé™æ§åˆ¶ã€è®¿é—®çº§åˆ«ç®¡ç†

### ğŸ“ çŸ¥è¯†åº“ç®¡ç†
- **çŸ¥è¯†åº“åˆ›å»º**: æ”¯æŒä¸ªäººã€å›¢é˜Ÿã€ç»„ç»‡ä¸‰ç§ç±»å‹
- **è®¿é—®æ§åˆ¶**: ç§æœ‰ã€å†…éƒ¨ã€å…¬å¼€ä¸‰ç§è®¿é—®çº§åˆ«
- **çŠ¶æ€ç®¡ç†**: æ´»è·ƒã€å½’æ¡£ã€åˆ é™¤çŠ¶æ€ç®¡ç†
- **ç»Ÿè®¡ä¿¡æ¯**: æ–‡æ¡£æ•°é‡ã€å­˜å‚¨å¤§å°ã€å¤„ç†çŠ¶æ€ç»Ÿè®¡

### ğŸ—‚ï¸ åˆ†ç±»ç®¡ç†ï¼ˆæ ‘å½¢ç»“æ„ï¼‰
- **æ— é™å±‚çº§**: æ”¯æŒä»»æ„æ·±åº¦çš„åˆ†ç±»åµŒå¥—
- **è·¯å¾„ç®¡ç†**: è‡ªåŠ¨ç»´æŠ¤åˆ†ç±»è·¯å¾„å’Œå±‚çº§å…³ç³»
- **æ’åºæ”¯æŒ**: æ”¯æŒåˆ†ç±»çš„è‡ªå®šä¹‰æ’åº
- **é€’å½’æ“ä½œ**: æ”¯æŒé€’å½’æŸ¥è¯¢å’Œæ“ä½œå­åˆ†ç±»

### ğŸ“„ æ–‡æ¡£ç®¡ç†
- **å¤šæ ¼å¼æ”¯æŒ**: PDFã€Wordã€Excelã€PPTã€å›¾ç‰‡ã€éŸ³è§†é¢‘ç­‰
- **ä¸Šä¼ é›†æˆ**: è°ƒç”¨uploadæ¨¡å—è¿›è¡Œæ–‡ä»¶å­˜å‚¨
- **åµŒå…¥å¤„ç†**: è°ƒç”¨ragæ¨¡å—è¿›è¡Œæ–‡æ¡£åµŒå…¥
- **çŠ¶æ€è·Ÿè¸ª**: å®Œæ•´çš„æ–‡æ¡£å¤„ç†çŠ¶æ€è·Ÿè¸ª

### ğŸ§  åµŒå…¥ç®¡ç†
- **å¤šæ¨¡å‹æ”¯æŒ**: æ”¯æŒä¸åŒçš„åµŒå…¥æ¨¡å‹
- **å‚æ•°é…ç½®**: å¯é…ç½®åˆ†å—ç­–ç•¥ã€å¤§å°ã€é‡å ç­‰å‚æ•°
- **ç»“æœå­˜å‚¨**: è¯¦ç»†è®°å½•åµŒå…¥è¿‡ç¨‹å’Œç»“æœ
- **é‡è¯•æœºåˆ¶**: æ”¯æŒå¤±è´¥é‡è¯•å’Œé‡æ–°å¤„ç†

## APIæ¥å£

### çŸ¥è¯†åº“ç®¡ç† API

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| POST | `/api/knowledge-base` | åˆ›å»ºçŸ¥è¯†åº“ |
| GET | `/api/knowledge-base/{id}` | è·å–çŸ¥è¯†åº“è¯¦æƒ… |
| PUT | `/api/knowledge-base/{id}` | æ›´æ–°çŸ¥è¯†åº“ |
| DELETE | `/api/knowledge-base/{id}` | åˆ é™¤çŸ¥è¯†åº“ |
| GET | `/api/knowledge-base/user/{userId}` | è·å–ç”¨æˆ·çŸ¥è¯†åº“åˆ—è¡¨ |
| GET | `/api/knowledge-base/search` | æœç´¢çŸ¥è¯†åº“ |

### æ–‡æ¡£ç®¡ç† API

| æ–¹æ³• | è·¯å¾„ | æè¿° |
|------|------|------|
| POST | `/api/knowledge-base/documents/upload` | ä¸Šä¼ æ–‡æ¡£ |
| POST | `/api/knowledge-base/documents/upload/batch` | æ‰¹é‡ä¸Šä¼  |
| GET | `/api/knowledge-base/documents/{id}` | è·å–æ–‡æ¡£è¯¦æƒ… |
| DELETE | `/api/knowledge-base/documents/{id}` | åˆ é™¤æ–‡æ¡£ |
| GET | `/api/knowledge-base/documents/category/{categoryId}` | è·å–åˆ†ç±»ä¸‹çš„æ–‡æ¡£ |
| POST | `/api/knowledge-base/documents/{id}/reprocess` | é‡æ–°å¤„ç†æ–‡æ¡£ |
| GET | `/api/knowledge-base/documents/{id}/embeddings` | è·å–æ–‡æ¡£åµŒå…¥ |

## ä½¿ç”¨ç¤ºä¾‹

### 1. åˆ›å»ºçŸ¥è¯†åº“

```bash
curl -X POST http://localhost:8080/api/knowledge-base \
  -H "Content-Type: application/json" \
  -d '{
    "kbCode": "tech-docs",
    "kbName": "æŠ€æœ¯æ–‡æ¡£åº“",
    "description": "æŠ€æœ¯ç›¸å…³æ–‡æ¡£çš„çŸ¥è¯†åº“",
    "ownerId": "user123",
    "kbType": "TEAM",
    "accessLevel": "INTERNAL"
  }'
```

### 2. ä¸Šä¼ æ–‡æ¡£

```bash
curl -X POST http://localhost:8080/api/knowledge-base/documents/upload \
  -F "file=@document.pdf" \
  -F "title=æŠ€æœ¯è§„èŒƒæ–‡æ¡£" \
  -F "categoryId=1" \
  -F "uploadUserId=user123" \
  -F "immediateEmbedding=true" \
  -F "embeddingModel=text-embedding-ada-002"
```

### 3. æœç´¢æ–‡æ¡£

```bash
curl "http://localhost:8080/api/knowledge-base/documents/search?keyword=API&page=0&size=10"
```

## æ¨¡å—é›†æˆ

### ä¸uploadæ¨¡å—é›†æˆ
- æ–‡ä»¶ä¸Šä¼ å’Œå­˜å‚¨
- æ–‡ä»¶ç®¡ç†å’Œä¸‹è½½
- æ–‡ä»¶ç±»å‹éªŒè¯

### ä¸ragæ¨¡å—é›†æˆ  
- æ–‡æ¡£å†…å®¹è§£æ
- æ–‡æœ¬åµŒå…¥å¤„ç†
- å‘é‡æ•°æ®å­˜å‚¨